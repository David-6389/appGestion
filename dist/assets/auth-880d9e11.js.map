{"version":3,"file":"auth-880d9e11.js","sources":["../../scripts/auth.js"],"sourcesContent":["// auth.js - Lógica de autenticación de usuarios\r\nimport { supabase } from './supabase.js';\r\n\r\n// Función para mostrar alertas (copiada de app.js para usarla aquí)\r\nfunction mostrarAlerta(mensaje, tipo = 'info') {\r\n    const alertContainer = document.getElementById('alertContainer');\r\n    if (!alertContainer) return;\r\n\r\n    const alerta = document.createElement('div');\r\n    alerta.className = `alert alert-${tipo} alert-dismissible fade show`;\r\n    alerta.innerHTML = `\r\n        ${mensaje}\r\n        <button type=\"button\" class=\"btn-close\" data-bs-dismiss=\"alert\"></button>\r\n    `;\r\n    alertContainer.appendChild(alerta);\r\n\r\n    setTimeout(() => alerta.remove(), 5000);\r\n}\r\n\r\n// --- MANEJADOR DE LOGIN ---\r\nconst loginForm = document.getElementById('login-form');\r\nif (loginForm) {\r\n    loginForm.addEventListener('submit', async (e) => {\r\n        e.preventDefault();\r\n        const email = document.getElementById('email').value;\r\n        const password = document.getElementById('password').value;\r\n\r\n        const { error } = await supabase.auth.signInWithPassword({\r\n            email: email,\r\n            password: password,\r\n        });\r\n\r\n        if (error) {\r\n            mostrarAlerta(`Error: ${error.message}`, 'danger');\r\n        } else {\r\n            // Redirigir a la página principal si el login es exitoso\r\n            window.location.href = '/index.html';\r\n        }\r\n    });\r\n}\r\n\r\n// --- MANEJADOR DE SIGNUP ---\r\nconst signupForm = document.getElementById('signup-form');\r\nif (signupForm) {\r\n    signupForm.addEventListener('submit', async (e) => {\r\n        e.preventDefault();\r\n        const email = document.getElementById('email').value;\r\n        const password = document.getElementById('password').value;\r\n\r\n        const { data, error } = await supabase.auth.signUp({\r\n            email: email,\r\n            password: password,\r\n        });\r\n\r\n        if (error) {\r\n            mostrarAlerta(`Error: ${error.message}`, 'danger');\r\n        } else {\r\n            if (data.user && data.user.identities && data.user.identities.length === 0) {\r\n                 mostrarAlerta('Este usuario ya existe. Intenta iniciar sesión.', 'warning');\r\n            } else {\r\n                 mostrarAlerta('¡Registro exitoso! Revisa tu email para confirmar tu cuenta.', 'success');\r\n                 // Opcional: redirigir a una página de \"revisa tu email\" o al login\r\n                 setTimeout(() => {\r\n                    window.location.href = '/login.html';\r\n                 }, 3000);\r\n            }\r\n        }\r\n    });\r\n}"],"names":["mostrarAlerta","mensaje","tipo","alertContainer","alerta","loginForm","e","email","password","error","supabase","signupForm","data"],"mappings":"2CAIA,SAASA,EAAcC,EAASC,EAAO,OAAQ,CAC3C,MAAMC,EAAiB,SAAS,eAAe,gBAAgB,EAC/D,GAAI,CAACA,EAAgB,OAErB,MAAMC,EAAS,SAAS,cAAc,KAAK,EAC3CA,EAAO,UAAY,eAAeF,CAAI,+BACtCE,EAAO,UAAY;AAAA,UACbH,CAAO;AAAA;AAAA,MAGbE,EAAe,YAAYC,CAAM,EAEjC,WAAW,IAAMA,EAAO,OAAQ,EAAE,GAAI,CAC1C,CAGA,MAAMC,EAAY,SAAS,eAAe,YAAY,EAClDA,GACAA,EAAU,iBAAiB,SAAU,MAAOC,GAAM,CAC9CA,EAAE,eAAc,EAChB,MAAMC,EAAQ,SAAS,eAAe,OAAO,EAAE,MACzCC,EAAW,SAAS,eAAe,UAAU,EAAE,MAE/C,CAAE,MAAAC,CAAO,EAAG,MAAMC,EAAS,KAAK,mBAAmB,CACrD,MAAOH,EACP,SAAUC,CACtB,CAAS,EAEGC,EACAT,EAAc,UAAUS,EAAM,OAAO,GAAI,QAAQ,EAGjD,OAAO,SAAS,KAAO,aAEnC,CAAK,EAIL,MAAME,EAAa,SAAS,eAAe,aAAa,EACpDA,GACAA,EAAW,iBAAiB,SAAU,MAAOL,GAAM,CAC/CA,EAAE,eAAc,EAChB,MAAMC,EAAQ,SAAS,eAAe,OAAO,EAAE,MACzCC,EAAW,SAAS,eAAe,UAAU,EAAE,MAE/C,CAAE,KAAAI,EAAM,MAAAH,CAAK,EAAK,MAAMC,EAAS,KAAK,OAAO,CAC/C,MAAOH,EACP,SAAUC,CACtB,CAAS,EAEGC,EACAT,EAAc,UAAUS,EAAM,OAAO,GAAI,QAAQ,EAE7CG,EAAK,MAAQA,EAAK,KAAK,YAAcA,EAAK,KAAK,WAAW,SAAW,EACpEZ,EAAc,kDAAmD,SAAS,GAE1EA,EAAc,+DAAgE,SAAS,EAEvF,WAAW,IAAM,CACd,OAAO,SAAS,KAAO,aACzB,EAAE,GAAI,EAGxB,CAAK"}